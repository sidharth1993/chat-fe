(this["webpackJsonpchat-fe-react"]=this["webpackJsonpchat-fe-react"]||[]).push([[0],{54:function(e,t,n){e.exports=n(67)},59:function(e,t,n){},60:function(e,t,n){},67:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(8),o=n.n(i),c=(n(59),n(60),n(13)),s=n(101),l=n(42),u=n(69),m=n(114),d=n(103),f=n(104),p=n(43),g=n.n(p),h=n(30),v=n.n(h),E=Object(l.a)((function(e){return{root:{padding:"2px 4px",display:"flex",alignItems:"center",width:400},input:{marginLeft:e.spacing(1),marginRight:e.spacing(1),flex:1},iconButton:{padding:10},divider:{height:28,margin:4}}})),b=v()()((function(e){e.width;var t=e.height,n=e.setUser,i=Object(a.useState)(!0),o=Object(c.a)(i,2),l=o[0],p=o[1],h=E(),v=Object(a.useRef)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,{maxWidth:"sm"},r.a.createElement("div",{style:{position:"relative",top:"".concat(t/3,"px")}},r.a.createElement(u.a,{component:"form",className:h.root},r.a.createElement(m.a,{error:l,inputRef:v,className:h.input,placeholder:"Enter User Name",inputProps:{"aria-label":"enter user name"}}),r.a.createElement(d.a,{className:h.divider,orientation:"vertical"}),r.a.createElement(f.a,{color:"primary",className:h.iconButton,"aria-label":"continue",onClick:function(){v.current.value?n(v.current.value):p(!0)}},r.a.createElement(g.a,null))))))})),O=n(34),w=n(3),y=n(23),x=n(113),j=n(106),S=n(107),k=n(105),N=n(109),P=n(35),B=n(45),C=n.n(B),I=n(46),W=n.n(I),R=n(115),M=n(110),T=n(44),z=n.n(T),D=n(108);function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){Object(O.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var G=Object(l.a)((function(e){return{root:{display:"flex"},appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginRight:240},title:{flexGrow:1},hide:{display:"none"},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},drawerHeader:J({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar,{justifyContent:"flex-start"}),content:{flexGrow:1,padding:e.spacing(3),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginRight:-240},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginRight:0}}})),L=function(e){var t=e.user,n=e.isOpen,i=e.addTo,o=e.online,s=Object(a.useState)(!1),l=Object(c.a)(s,2),u=l[0],m=l[1],p=G(),g=Object(y.a)(),h=r.a.useState(!1),v=Object(c.a)(h,2),E=v[0],b=v[1];return r.a.createElement("div",{className:p.root},r.a.createElement(k.a,null),r.a.createElement(j.a,{position:"fixed",className:Object(w.a)(p.appBar,Object(O.a)({},p.appBarShift,E))},r.a.createElement(S.a,null,r.a.createElement(P.a,{variant:"h6",noWrap:!0,className:p.title},t),r.a.createElement(f.a,{color:"inherit","aria-label":"open drawer",edge:"end",onClick:function(){n(!0),m(!1),b(!0)},className:Object(w.a)(E&&p.hide)},r.a.createElement(D.a,{invisible:!u,color:"secondary",variant:"dot"},r.a.createElement(z.a,null))))),r.a.createElement("main",{className:Object(w.a)(p.content,Object(O.a)({},p.contentShift,E))},r.a.createElement("div",{className:p.drawerHeader})),r.a.createElement(x.a,{className:p.drawer,variant:"persistent",anchor:"right",open:E,classes:{paper:p.drawerPaper}},r.a.createElement("div",{className:p.drawerHeader},r.a.createElement(f.a,{onClick:function(){n(!1),b(!1)}},"rtl"===g.direction?r.a.createElement(C.a,null):r.a.createElement(W.a,null))),r.a.createElement(d.a,null),r.a.createElement(N.a,null,o.map((function(e){return r.a.createElement(R.a,{button:!0,onClick:function(){return t=e.user,void i(t);var t},key:e.user},r.a.createElement(D.a,{invisible:!e.unread,color:"secondary",variant:"dot",anchorOrigin:{horizontal:"left",vertical:"top"},overlap:"rectangle"}),r.a.createElement(M.a,{style:{marginLeft:"10px"},primary:e.user}))})))))},K=n(47),U=n.n(K),F=Object(l.a)((function(e){return{margin:{margin:e.spacing(1),width:"90%",float:"left"},divider:{height:28,margin:4},card:{minWidth:275,margin:1,padding:"2px 4px",display:"flex",alignItems:"center"},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12}}})),A=function(e){var t=e.to,n=(e.from,e.send),i=!1,o=Object(a.useRef)(),c=F(),s=function(){if(o.current.value){if(i)o.current.value.split("\n").forEach((function(e){n(e,t)}));else n(o.current.value,t);i=!1,o.current.value=null}};return r.a.createElement(u.a,{component:"form",className:c.card},r.a.createElement(m.a,{className:c.margin,defaultValue:"",inputRef:o,multiline:!0,placeholder:"Type your message",inputProps:{"aria-label":"naked"},onKeyPress:function(e){return function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),s()),"Enter"===e.key&&e.shiftKey&&(i=!0)}(e)}}),r.a.createElement(d.a,{className:c.divider,orientation:"vertical"}),r.a.createElement(f.a,{onClick:s},r.a.createElement(U.a,null)))},V=n(48),Y=n.n(V),$=n(111),q=Object(l.a)((function(){return{close:{float:"right"},root:{flexGrow:1}}})),Q=function(e){var t=e.to,n=e.closeChat,a=q();return r.a.createElement("div",{className:a.root},r.a.createElement($.a,{container:!0,spacing:3},r.a.createElement($.a,{item:!0,xs:6},r.a.createElement(P.a,{align:"left",color:"primary",component:"div"},t)),r.a.createElement($.a,{item:!0,xs:6},r.a.createElement(f.a,{size:"small",className:a.close,onClick:function(){return n(t)}},r.a.createElement(Y.a,{fontSize:"small",color:"secondary"})))))},X=n(112),Z=[],_=v()()((function(e){e.width;var t=e.height,n=e.user,i=e.online,o=e.connection,s=e.updateOnline,u=Object(a.useState)(!1),m=Object(c.a)(u,2),f=m[0],p=m[1],g=Object(a.useState)([]),h=Object(c.a)(g,2),v=h[0],E=h[1],b=Object(l.a)((function(e){return{root:{flexGrow:1,margin:20},input:{marginLeft:e.spacing(1),flex:1},iconButton:{padding:10},divider:{height:28,margin:4}}}))(),O=function(e,t){w(e,t,"right"),o.send(JSON.stringify({from:n,to:t,message:e}))},w=function(e,t,n){var a="background-color:".concat("right"===n?"white":"#b3ecff",";border-radius:4px;text-align:left;width:auto;max-width:80%;word-wrap:normal;float:").concat(n,";"),r="<div style=".concat(a,"><span style='margin-left:5px;margin-right:5px'>").concat(e,"</span></div><br/>");document.getElementById(t).innerHTML+=r};o.onmessage=function(e){var t=JSON.parse(e.data);if(t.message)if(document.getElementById(t.from))w(t.message,t.from,"left");else{var a=Z.findIndex((function(e){return e.user===t.from}));a>=0?(Z[a].unread=!0,Z[a].unreadMessages.push(t.message)):Z.push({user:t.from,unread:!0,unreadMessages:[t.message]}),f&&y(f)}if(t.error&&w("<i>".concat(t.error,"</i>"),t.to,"left"),t.existing){var r=[];t.existing.forEach((function(e){e!==n&&r.push({user:e})})),s(r)}};var y=function(e){var t=[];Object.assign(t,i),i.forEach((function(e){var n=Z.findIndex((function(t){return t.user===e.user}));n>=0&&t.splice(n,1)})),t.push.apply(t,Z),s(t),p(e)},x=function(e){var t;t=v.filter((function(t){return t!==e})),E(t)};return r.a.createElement("div",{className:b.root},r.a.createElement(L,{user:n,isOpen:y,addTo:function(e){return function(e){if(v.indexOf(e)<0){var t=[];Object.assign(t,v),t.push(e),E(t),setTimeout((function(){var t=Z.findIndex((function(t){return t.user===e}));if(t>=0){Z[t].unreadMessages.forEach((function(e){return w(e,Z[t].user,"left")})),Z.splice(t,1);var n=[];Object.assign(n,i),n.map((function(t){return t.user===e&&(t={user:e,unread:!1,unreadMessages:[]}),t})),s(n)}}),1e3)}}(e)},online:i}),v.map((function(e){return r.a.createElement(X.a,{key:e,width:f?"80%":"100%",bgcolor:"grey.300",p:1,my:.5},r.a.createElement("div",null,r.a.createElement(Q,{to:e,closeChat:x}),r.a.createElement(d.a,null),r.a.createElement("div",{style:{maxHeight:t/3,overflowY:"auto"},id:e}),r.a.createElement("div",{style:{marginTop:"20px"}},r.a.createElement(A,{to:e,from:n,send:O}))))})))})),ee=!1,te=null,ne=null;var ae=function(){var e=Object(a.useState)([]),t=Object(c.a)(e,2),n=t[0],i=t[1],o=function(e){var t=JSON.parse(e.data);if(!t.error&&t.existing){var n=[];t.existing.forEach((function(e){e!==ne&&n.push({user:e})})),s(n)}},s=function(e){i(e)};return r.a.createElement(r.a.Fragment,null,ee&&r.a.createElement(_,{user:ne,online:n,connection:te,updateOnline:s}),!ee&&r.a.createElement(b,{setUser:function(e){window.WebSocket=window.WebSocket||window.MozWebSocket,(te=new WebSocket("wss://chatsocketbe.herokuapp.com/?from="+e)).onopen=function(t){ee=!0,ne=e},te.onmessage=o}}))};var re=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(ae,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(re,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[54,1,2]]]);
//# sourceMappingURL=main.3257613a.chunk.js.map