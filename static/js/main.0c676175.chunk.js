(this["webpackJsonpchat-fe-react"]=this["webpackJsonpchat-fe-react"]||[]).push([[0],{53:function(e,t,n){e.exports=n(66)},58:function(e,t,n){},59:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(8),o=n.n(i),c=(n(58),n(59),n(13)),s=n(98),l=n(42),u=n(68),m=n(110),d=n(100),f=n(101),p=n(43),g=n.n(p),h=n(41),v=n.n(h),b=Object(l.a)((function(e){return{root:{padding:"2px 4px",display:"flex",alignItems:"center",width:400},input:{marginLeft:e.spacing(1),marginRight:e.spacing(1),flex:1},iconButton:{padding:10},divider:{height:28,margin:4}}})),E=v()()((function(e){e.width;var t=e.height,n=e.setUser,i=Object(a.useState)(!0),o=Object(c.a)(i,2),l=o[0],p=o[1],h=b(),v=Object(a.useRef)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,{maxWidth:"sm"},r.a.createElement("div",{style:{position:"relative",top:"".concat(t/3,"px")}},r.a.createElement(u.a,{component:"form",className:h.root},r.a.createElement(m.a,{error:l,inputRef:v,className:h.input,placeholder:"Enter User Name",inputProps:{"aria-label":"enter user name"}}),r.a.createElement(d.a,{className:h.divider,orientation:"vertical"}),r.a.createElement(f.a,{color:"primary",className:h.iconButton,"aria-label":"continue",onClick:function(){v.current.value?n(v.current.value):p(!0)}},r.a.createElement(g.a,null))))))})),O=n(32),w=n(3),y=n(22),j=n(109),x=n(103),S=n(104),k=n(102),N=n(106),P=n(33),B=n(45),I=n.n(B),W=n(46),R=n.n(W),C=n(111),M=n(107),T=n(44),D=n.n(T),J=n(105);function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){Object(O.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var z=Object(l.a)((function(e){return{root:{display:"flex"},appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginRight:240},title:{flexGrow:1},hide:{display:"none"},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},drawerHeader:L({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar,{justifyContent:"flex-start"}),content:{flexGrow:1,padding:e.spacing(3),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginRight:-240},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginRight:0}}})),G=function(e){var t=e.user,n=e.isOpen,i=e.addTo,o=e.online,s=Object(a.useState)(!1),l=Object(c.a)(s,2),u=l[0],m=l[1],p=z(),g=Object(y.a)(),h=r.a.useState(!1),v=Object(c.a)(h,2),b=v[0],E=v[1];return r.a.createElement("div",{className:p.root},r.a.createElement(k.a,null),r.a.createElement(x.a,{position:"fixed",className:Object(w.a)(p.appBar,Object(O.a)({},p.appBarShift,b))},r.a.createElement(S.a,null,r.a.createElement(P.a,{variant:"h6",noWrap:!0,className:p.title},t),r.a.createElement(f.a,{color:"inherit","aria-label":"open drawer",edge:"end",onClick:function(){n(!0),m(!1),E(!0)},className:Object(w.a)(b&&p.hide)},r.a.createElement(J.a,{invisible:!u,color:"secondary",variant:"dot"},r.a.createElement(D.a,null))))),r.a.createElement("main",{className:Object(w.a)(p.content,Object(O.a)({},p.contentShift,b))},r.a.createElement("div",{className:p.drawerHeader})),r.a.createElement(j.a,{className:p.drawer,variant:"persistent",anchor:"right",open:b,classes:{paper:p.drawerPaper}},r.a.createElement("div",{className:p.drawerHeader},r.a.createElement(f.a,{onClick:function(){n(!1),E(!1)}},"rtl"===g.direction?r.a.createElement(I.a,null):r.a.createElement(R.a,null))),r.a.createElement(d.a,null),r.a.createElement(N.a,null,o.map((function(e){return r.a.createElement(C.a,{button:!0,onClick:function(){return t=e.user,void i(t);var t},key:e.user},r.a.createElement(J.a,{invisible:!e.unread,color:"secondary",variant:"dot",anchorOrigin:{horizontal:"left",vertical:"top"},overlap:"rectangle"}),r.a.createElement(M.a,{style:{marginLeft:"10px"},primary:e.user}))})))))},K=n(47),U=n.n(K),F=Object(l.a)((function(e){return{margin:{margin:e.spacing(1),width:"90%",float:"left"},divider:{height:28,margin:4},card:{minWidth:275,margin:1,padding:"2px 4px",display:"flex",alignItems:"center"},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12}}})),A=function(e){var t=e.to,n=(e.from,e.send),i=!1,o=Object(a.useRef)(),c=F(),s=function(){if(o.current.value){if(i)o.current.value.split("\n").forEach((function(e){n(e,t)}));else n(o.current.value,t);i=!1,o.current.value=null}};return r.a.createElement(u.a,{component:"form",className:c.card},r.a.createElement(m.a,{className:c.margin,defaultValue:"",inputRef:o,multiline:!0,placeholder:"Type your message",inputProps:{"aria-label":"naked"},onKeyPress:function(e){return function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),s()),"Enter"===e.key&&e.shiftKey&&(i=!0)}(e)}}),r.a.createElement(d.a,{className:c.divider,orientation:"vertical"}),r.a.createElement(f.a,{onClick:s},r.a.createElement(U.a,null)))},V=function(e){var t=e.to;return r.a.createElement(P.a,{align:"left",color:"primary",component:"div"},t)},$=n(108),q=[],Q=function(e){var t=e.user,n=e.online,i=e.connection,o=e.updateOnline,s=Object(a.useState)(!1),u=Object(c.a)(s,2),m=u[0],f=u[1],p=Object(a.useState)([]),g=Object(c.a)(p,2),h=g[0],v=g[1],b=Object(l.a)((function(e){return{root:{flexGrow:1,margin:20},input:{marginLeft:e.spacing(1),flex:1},iconButton:{padding:10},divider:{height:28,margin:4}}}))(),E=function(e,n){O(e,n,"right"),i.send(JSON.stringify({from:t,to:n,message:e}))},O=function(e,t,n){var a="background-color:".concat("right"===n?"white":"#b3ecff",";border-radius:4px;text-align:left;width:auto;max-width:80%;word-wrap:normal;float:").concat(n,";"),r="<div style=".concat(a,"><span style='margin-left:5px;margin-right:5px'>").concat(e,"</span></div><br/>");document.getElementById(t).innerHTML+=r};i.onmessage=function(e){var n=JSON.parse(e.data);if(n.message)if(document.getElementById(n.from))O(n.message,n.from,"left");else{var a=q.findIndex((function(e){return e.user===n.from}));a>=0?(q[a].unread=!0,q[a].unreadMessages.push(n.message)):q.push({user:n.from,unread:!0,unreadMessages:[n.message]}),m&&w(m)}if(n.error&&O("<i>".concat(n.error,"</i>"),n.to,"left"),n.existing){var r=[];n.existing.forEach((function(e){e!==t&&r.push({user:e})})),o(r)}};var w=function(e){var t=[];Object.assign(t,n),n.forEach((function(e){var n=q.findIndex((function(t){return t.user===e.user}));n>=0&&t.splice(n,1)})),t.push.apply(t,q),o(t),f(e)};return r.a.createElement("div",{className:b.root},r.a.createElement(G,{user:t,isOpen:w,addTo:function(e){return function(e){if(h.indexOf(e)<0){var t=[];Object.assign(t,h),t.push(e),v(t),setTimeout((function(){var t=q.findIndex((function(t){return t.user===e}));if(t>=0){q[t].unreadMessages.forEach((function(e){return O(e,q[t].user,"left")}));var a=[];Object.assign(a,n),a[t].unread=!1,a[t].unreadMessages=[],o(a),q.splice(t,1)}}),1e3)}}(e)},online:n}),h.map((function(e){return r.a.createElement($.a,{key:e,width:m?"80%":"100%",bgcolor:"grey.300",p:1,my:.5},r.a.createElement("div",null,r.a.createElement(V,{to:e}),r.a.createElement(d.a,null),r.a.createElement("div",{id:e}),r.a.createElement("div",{style:{marginTop:"20px"}},r.a.createElement(A,{to:e,from:t,send:E}))))})))},X=!1,Y=null,Z=null;var _=function(){var e=Object(a.useState)([]),t=Object(c.a)(e,2),n=t[0],i=t[1],o=function(e){var t=JSON.parse(e.data);if(!t.error&&t.existing){var n=[];t.existing.forEach((function(e){e!==Z&&n.push({user:e})})),s(n)}},s=function(e){i(e)};return r.a.createElement(r.a.Fragment,null,X&&r.a.createElement(Q,{user:Z,online:n,connection:Y,updateOnline:s}),!X&&r.a.createElement(E,{setUser:function(e){window.WebSocket=window.WebSocket||window.MozWebSocket,(Y=new WebSocket("ws://127.0.0.1:1447/?from="+e)).onopen=function(t){X=!0,Z=e},Y.onmessage=o}}))};var ee=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(_,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(ee,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[53,1,2]]]);
//# sourceMappingURL=main.0c676175.chunk.js.map