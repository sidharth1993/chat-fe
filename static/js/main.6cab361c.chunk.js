(this["webpackJsonpchat-fe-react"]=this["webpackJsonpchat-fe-react"]||[]).push([[0],{53:function(e,t,n){e.exports=n(66)},58:function(e,t,n){},59:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(8),o=n.n(i),c=(n(58),n(59),n(13)),s=n(100),l=n(42),u=n(68),m=n(113),d=n(102),f=n(103),p=n(43),g=n.n(p),h=n(30),v=n.n(h),E=Object(l.a)((function(e){return{root:{padding:"2px 4px",display:"flex",alignItems:"center",width:400},input:{marginLeft:e.spacing(1),marginRight:e.spacing(1),flex:1},iconButton:{padding:10},divider:{height:28,margin:4}}})),b=v()()((function(e){e.width;var t=e.height,n=e.setUser,i=Object(a.useState)(!0),o=Object(c.a)(i,2),l=o[0],p=o[1],h=E(),v=Object(a.useRef)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,{maxWidth:"sm"},r.a.createElement("div",{style:{position:"relative",top:"".concat(t/3,"px")}},r.a.createElement(u.a,{component:"form",className:h.root},r.a.createElement(m.a,{error:l,inputRef:v,className:h.input,placeholder:"Enter User Name",inputProps:{"aria-label":"enter user name"}}),r.a.createElement(d.a,{className:h.divider,orientation:"vertical"}),r.a.createElement(f.a,{color:"primary",className:h.iconButton,"aria-label":"continue",onClick:function(){v.current.value?n(v.current.value):p(!0)}},r.a.createElement(g.a,null))))))})),O=n(34),w=n(3),y=n(22),x=n(112),j=n(105),S=n(106),k=n(104),N=n(108),B=n(35),M=n(45),T=n.n(M),H=n(46),I=n.n(H),L=n(114),P=n(109),W=n(44),R=n.n(W),C=n(107);function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){Object(O.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var G=Object(l.a)((function(e){return{root:{display:"flex"},appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginRight:240},title:{flexGrow:1},hide:{display:"none"},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},drawerHeader:J({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar,{justifyContent:"flex-start"}),content:{flexGrow:1,padding:e.spacing(3),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginRight:-240},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginRight:0}}})),z=function(e){var t=e.user,n=e.isOpen,i=e.addTo,o=e.online,s=Object(a.useState)(!1),l=Object(c.a)(s,2),u=l[0],m=l[1],p=G(),g=Object(y.a)(),h=r.a.useState(!1),v=Object(c.a)(h,2),E=v[0],b=v[1];return r.a.createElement("div",{className:p.root},r.a.createElement(k.a,null),r.a.createElement(j.a,{position:"fixed",className:Object(w.a)(p.appBar,Object(O.a)({},p.appBarShift,E))},r.a.createElement(S.a,null,r.a.createElement(B.a,{variant:"h6",noWrap:!0,className:p.title},t),r.a.createElement(f.a,{color:"inherit","aria-label":"open drawer",edge:"end",onClick:function(){n(!0),m(!1),b(!0)},className:Object(w.a)(E&&p.hide)},r.a.createElement(C.a,{invisible:!u,color:"secondary",variant:"dot"},r.a.createElement(R.a,null))))),r.a.createElement("main",{className:Object(w.a)(p.content,Object(O.a)({},p.contentShift,E))},r.a.createElement("div",{className:p.drawerHeader})),r.a.createElement(x.a,{className:p.drawer,variant:"persistent",anchor:"right",open:E,classes:{paper:p.drawerPaper}},r.a.createElement("div",{className:p.drawerHeader},r.a.createElement(f.a,{onClick:function(){n(!1),b(!1)}},"rtl"===g.direction?r.a.createElement(T.a,null):r.a.createElement(I.a,null))),r.a.createElement(d.a,null),r.a.createElement(N.a,null,o.map((function(e){return r.a.createElement(L.a,{button:!0,onClick:function(){return t=e.user,void i(t);var t},key:e.user},r.a.createElement(C.a,{invisible:!e.unread,color:"secondary",variant:"dot",anchorOrigin:{horizontal:"left",vertical:"top"},overlap:"rectangle"}),r.a.createElement(P.a,{style:{marginLeft:"10px"},primary:e.user}))})))))},K=n(47),U=n.n(K),F=Object(l.a)((function(e){return{margin:{margin:e.spacing(1),width:"90%",float:"left"},divider:{height:28,margin:4},card:{minWidth:275,margin:1,padding:"2px 4px",display:"flex",alignItems:"center"},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12}}})),A=function(e){var t=e.to,n=(e.from,e.send),i=!1,o=Object(a.useRef)(),c=F(),s=function(){if(o.current.value){if(i)o.current.value.split("\n").forEach((function(e){n(e,t)}));else n(o.current.value,t);i=!1,o.current.value=null}};return r.a.createElement(u.a,{component:"form",className:c.card},r.a.createElement(m.a,{className:c.margin,defaultValue:"",inputRef:o,multiline:!0,placeholder:"Type your message",inputProps:{"aria-label":"naked"},onKeyPress:function(e){return function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),s()),"Enter"===e.key&&e.shiftKey&&(i=!0)}(e)}}),r.a.createElement(d.a,{className:c.divider,orientation:"vertical"}),r.a.createElement(f.a,{onClick:s},r.a.createElement(U.a,null)))},V=n(110),Y=Object(l.a)((function(){return{close:{float:"right"},root:{flexGrow:1}}})),$=function(e){var t=e.to,n=(e.closeChat,Y());return r.a.createElement("div",{className:n.root},r.a.createElement(V.a,{container:!0,spacing:3},r.a.createElement(V.a,{item:!0,xs:6},r.a.createElement(B.a,{align:"left",color:"primary",component:"div"},t)),r.a.createElement(V.a,{item:!0,xs:6})))},q=n(111),Q=[],X=[],Z=v()()((function(e){e.width;var t=e.height,n=e.user,i=e.online,o=e.connection,s=e.updateOnline,u=Object(a.useState)(!1),m=Object(c.a)(u,2),f=m[0],p=m[1],g=Object(a.useState)({user:null,innerHTML:""}),h=Object(c.a)(g,2),v=h[0],E=h[1],b=Object(l.a)((function(e){return{root:{flexGrow:1,margin:20},input:{marginLeft:e.spacing(1),flex:1},iconButton:{padding:10},divider:{height:28,margin:4}}}))(),O=function(e){var t=X.findIndex((function(t){return t.user===e}));t<0?(X.push({user:e,innerHTML:""}),E({user:e,innerHTML:""}),setTimeout((function(){return w(e)}),1e3)):E(X[t]),function(){if(v.user)if(X.findIndex((function(e){return e.user===v.user}))>=0)for(var e=0;e<X.length;e++)X[e].user===v.user&&(X[e].innerHTML=document.getElementById(v.user).innerHTML);else X.push({user:v.user,innerHTML:document.getElementById(v.user).innerHTML})}()};Object(a.useEffect)((function(){v.user&&(document.getElementById(v.user).innerHTML=v.innerHTML)}),[v]);var w=function(e){var t=Q.findIndex((function(t){return t.user===e}));if(t>=0){Q[t].unreadMessages.forEach((function(e){return y(e,Q[t].user,"left")})),Q.splice(t,1);var n=[];Object.assign(n,i);for(var a=0;a<n.length;a++)n[a].user===e&&(n[a].unread=!1,n[a].unreadMessages=[]);s(n)}},y=function(e,t,n){var a="background-color:".concat("right"===n?"white":"#b3ecff",";border-radius:4px;text-align:left;width:auto;max-width:80%;word-wrap:normal;float:").concat(n,";"),r="<div style=".concat(a,"><span style='margin-left:5px;margin-right:5px'>").concat(e,"</span></div><br/>");document.getElementById(t).innerHTML+=r};o.onmessage=function(e){var t=JSON.parse(e.data);if(t.message)if(document.getElementById(t.from))y(t.message,t.from,"left");else{var a=Q.findIndex((function(e){return e.user===t.from}));a>=0?(Q[a].unread=!0,Q[a].unreadMessages.push(t.message)):Q.push({user:t.from,unread:!0,unreadMessages:[t.message]}),f&&x(f)}if(t.error&&y("<i>".concat(t.error,"</i>"),t.to,"left"),t.existing){var r=[];t.existing.forEach((function(e){e!==n&&r.push({user:e})})),s(r)}};var x=function(e){var t=[].concat(Q);i.forEach((function(e){t.findIndex((function(t){return t.user===e.user}))<0&&t.push(e)})),s(t),p(e)};return r.a.createElement("div",{className:b.root},r.a.createElement(z,{user:n,isOpen:x,addTo:function(e){return O(e)},online:i}),v.user&&r.a.createElement(q.a,{width:f?"80%":"100%",bgcolor:"grey.300",p:1,my:.5},r.a.createElement("div",null,r.a.createElement($,{to:v.user}),r.a.createElement(d.a,null),r.a.createElement("div",{style:{maxHeight:t/3,overflowY:"auto"},id:v.user}),r.a.createElement("div",{style:{marginTop:"20px"}},r.a.createElement(A,{to:v.user,from:n,send:function(e,t){y(e,t,"right"),o.send(JSON.stringify({from:n,to:t,message:e}))}})))))})),_=!1,ee=null,te=null;var ne=function(){var e=Object(a.useState)([]),t=Object(c.a)(e,2),n=t[0],i=t[1],o=function(e){var t=JSON.parse(e.data);if(!t.error&&t.existing){var n=[];t.existing.forEach((function(e){e!==te&&n.push({user:e})})),s(n)}},s=function(e){i(e)};return r.a.createElement(r.a.Fragment,null,_&&r.a.createElement(Z,{user:te,online:n,connection:ee,updateOnline:s}),!_&&r.a.createElement(b,{setUser:function(e){window.WebSocket=window.WebSocket||window.MozWebSocket,(ee=new WebSocket("wss://chatsocketbe.herokuapp.com/?from="+e)).onopen=function(t){_=!0,te=e},ee.onmessage=o}}))};var ae=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(ne,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(ae,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[53,1,2]]]);
//# sourceMappingURL=main.6cab361c.chunk.js.map